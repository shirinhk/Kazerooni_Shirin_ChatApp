{"remainingRequest":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/src/views/Chat.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/src/views/Chat.vue","mtime":1646438752524},{"path":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/node_modules/css-loader/dist/cjs.js","mtime":1643429647000},{"path":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1643429647000},{"path":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/node_modules/postcss-loader/src/index.js","mtime":1643429647231},{"path":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/node_modules/sass-loader/lib/loader.js","mtime":1643514231941},{"path":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/node_modules/cache-loader/dist/cjs.js","mtime":1643428235000},{"path":"/Users/shirinhk/Desktop/Kazerooni_Shirin_ChatApp/chatapp_front/node_modules/vue-loader/lib/index.js","mtime":1643429647372}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAiQC9hc3NldHMvc2Fzcy9jaGF0LnNjc3MiOwo="},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA","file":"Chat.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <main>\n   \n      <section id=\"chat\">\n        <!-- left hand side -> users go here -->\n        <section id=\"chat-users-ui\">\n          <h2 class=\"online-users\">Current Users:</h2>\n          \n          <ul id=\"current-users\">\n            <ChatUser\n            v-for=\"user in users\"\n            :key=\"user.user\"\n            :username=\"user\"\n            />\n          </ul>\n        </section>\n        \n      \n\n        <!-- right hand side -> cha UI -->\n        <section id=\"chat-messages-ui\">\n\n          <div class=\"welcome-message\">\n          <img src=\"@/assets/images/logo_v.png\" alt=\"Safe Chat logo\" class=\"logo_v\">\n          <h1 class=\"welcome-text\">Welcome, {{ ChatUserName }}</h1>\n          </div>\n\n          <!-- render a component for every message -->    \n          <div class=\"chat-messages\"  ref=\"scroll\">\n            <ChatMessage\n            v-for=\"msg in messages\"\n            :key=\"msg.id\"\n            :message=\"msg.message\"\n            :user=\"msg.user\"\n            :sender=\"ChatUserName === msg.user ? 'sender' : 'receiver'\"\n            />\n          </div>\n         \n          <section id=\"text-wrapper\">\n            <textarea @keyup.enter=\"sendOnEnter\" id=\"message\" v-model=\"message\" placeholder=\"What's on your mind?\"></textarea>\n\n            <button id=\"sendMessage\" \n            @click=\"sendMessage\" \n            :disabled=\"messageContent\"\n            :class=\"{'disabled': messageContent}\">\n            <i class=\"fa-solid fa-plane-departure\"></i>\n            </button>\n            <div class=\"status\"> \n              <p class=\"disconnected\">{{ userThatDisconnected}}</p> \n              <p class=\"disconnected\">{{ userThatConnected }}</p>   \n            </div>\n          </section>\n        </section>\n      </section>\n    \n  </main>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nimport vars from \"@/env.js\";\nimport ChatMessage from \"@/components/ChatMessage.vue\";\nimport ChatUser from \"@/components/ChatUser.vue\";\n\n\nexport default {\n  name: \"TheChatComponent\",\n\n  props: {\n    ChatUserName: String, \n  },\n\n  mounted() {\n    let vm = this;\n\n    this.socket.on(\"CONNECTED\", (id) => {\n      vm.socketID = id;\n\n      this.socket.emit('user-joined', { user: this.ChatUserName || \"Anonymous\"});\n    })\n\n    this.socket.on(\"joined\", (data) => {\n      vm.users = data.user;\n      console.log(vm.users);\n    })\n\n    this.socket.on('user-has-joined', (data) => {\n      vm.userThatConnected = data.message;\n      setTimeout(function() { vm.userThatConnected = ''; }, 3000);\n    })\n\n\n    this.socket.on('user-disconnected', (data) => {\n      vm.userThatDisconnected = data.messageDisconnect;\n      setTimeout(function() { vm.userThatDisconnected = ''; }, 3000);\n    })\n\n\n    this.socket.on('MESSAGE', (message) => {\n      message.id = this.getNewId();\n      \n      vm.messages = [ ...vm.messages, message];\n      console.log(message);\n\n       this.$nextTick(() => this.scrollToEnd());\n\n    })\n  },\n\n  computed: {\n    messageContent: function() {\n      return this.message.trim() === '';\n    },\n\n    senderReceiver: function(socketID) {\n      return socketID === this.socketID\n    }\n  },\n\n\n  data() {\n    return {\n      // store the connection ID so we can use it later\n      socketID: '',\n      message: '',\n      messages: [],\n      users: [],\n      currentID: [],\n      userThatDisconnected: '',\n      userThatConnected: '',\n     \n\n\n      socket: io(vars.basePath, {\n        withCredentials: false,\n        extraHeaders: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      })\n    }\n  },\n\n  methods : {\n    sendMessage() {\n    this.socket.emit('SEND_MESSAGE', {user: this.ChatUserName || \"Anonymous\", message: this.message});\n    \n    this.message = '';\n    },\n\n    getNewId() {\n      this.currentID++;\n      return this.currentID;\n    },\n\n    sendOnEnter() {\n      if (this.messageContent == false && event.keyCode == 13) {\n        this.sendMessage();\n      }else {\n        this.socket.emit(\"TYPING\", { user: this.username || \"Ananymous\"});\n      }\n    },\n\n    scrollToEnd: function () {\n            var content = this.$refs.scroll;\n            content.scrollTop = content.scrollHeight\n        },\n\n  },\n\n  components: {\n    ChatMessage, ChatUser,\n  }\n}\n\n\n\n\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/sass/chat.scss\";\n</style>\n"]}]}