{"remainingRequest":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/src/views/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/src/views/Chat.vue","mtime":1646438637997},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/cache-loader/dist/cjs.js","mtime":1643428235000},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/babel-loader/lib/index.js","mtime":1643429647236},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/cache-loader/dist/cjs.js","mtime":1643428235000},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/vue-loader/lib/index.js","mtime":1643429647372}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBpbyBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKaW1wb3J0IHZhcnMgZnJvbSAiQC9lbnYuanMiOwppbXBvcnQgQ2hhdE1lc3NhZ2UgZnJvbSAiQC9jb21wb25lbnRzL0NoYXRNZXNzYWdlLnZ1ZSI7CmltcG9ydCBDaGF0VXNlciBmcm9tICJAL2NvbXBvbmVudHMvQ2hhdFVzZXIudnVlIjsKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRoZUNoYXRDb21wb25lbnQiLAoKICBwcm9wczogewogICAgQ2hhdFVzZXJOYW1lOiBTdHJpbmcsIAogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBsZXQgdm0gPSB0aGlzOwoKICAgIHRoaXMuc29ja2V0Lm9uKCJDT05ORUNURUQiLCAoaWQpID0+IHsKICAgICAgdm0uc29ja2V0SUQgPSBpZDsKCiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ3VzZXItam9pbmVkJywgeyB1c2VyOiB0aGlzLkNoYXRVc2VyTmFtZSB8fCAiQW5vbnltb3VzIn0pOwogICAgfSkKCiAgICB0aGlzLnNvY2tldC5vbigiam9pbmVkIiwgKGRhdGEpID0+IHsKICAgICAgdm0udXNlcnMgPSBkYXRhLnVzZXI7CiAgICAgIGNvbnNvbGUubG9nKHZtLnVzZXJzKTsKICAgIH0pCgogICAgdGhpcy5zb2NrZXQub24oJ3VzZXItaGFzLWpvaW5lZCcsIChkYXRhKSA9PiB7CiAgICAgIHZtLnVzZXJUaGF0Q29ubmVjdGVkID0gZGF0YS5tZXNzYWdlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB2bS51c2VyVGhhdENvbm5lY3RlZCA9ICcnOyB9LCAzMDAwKTsKICAgIH0pCgoKICAgIHRoaXMuc29ja2V0Lm9uKCd1c2VyLWRpc2Nvbm5lY3RlZCcsIChkYXRhKSA9PiB7CiAgICAgIHZtLnVzZXJUaGF0RGlzY29ubmVjdGVkID0gZGF0YS5tZXNzYWdlRGlzY29ubmVjdDsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdm0udXNlclRoYXREaXNjb25uZWN0ZWQgPSAnJzsgfSwgMzAwMCk7CiAgICB9KQoKCiAgICB0aGlzLnNvY2tldC5vbignTUVTU0FHRScsIChtZXNzYWdlKSA9PiB7CiAgICAgIG1lc3NhZ2UuaWQgPSB0aGlzLmdldE5ld0lkKCk7CiAgICAgIAogICAgICB2bS5tZXNzYWdlcyA9IFsgLi4udm0ubWVzc2FnZXMsIG1lc3NhZ2VdOwogICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTsKCiAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLnNjcm9sbFRvRW5kKCkpOwogICAgICAKICAgICAgLy8gY29uc3QgY2hhdE1lc3NhZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtbWVzc2FnZXMtdWknKTsKICAgICAgLy8gY2hhdE1lc3NhZ2VzLnNjcm9sbFRvcCA9IGNoYXRNZXNzYWdlcy5zY3JvbGxIZWlnaHQ7CiAgICB9KQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBtZXNzYWdlQ29udGVudDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2UudHJpbSgpID09PSAnJzsKICAgIH0sCgogICAgc2VuZGVyUmVjZWl2ZXI6IGZ1bmN0aW9uKHNvY2tldElEKSB7CiAgICAgIHJldHVybiBzb2NrZXRJRCA9PT0gdGhpcy5zb2NrZXRJRAogICAgfQogIH0sCgoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gc3RvcmUgdGhlIGNvbm5lY3Rpb24gSUQgc28gd2UgY2FuIHVzZSBpdCBsYXRlcgogICAgICBzb2NrZXRJRDogJycsCiAgICAgIG1lc3NhZ2U6ICcnLAogICAgICBtZXNzYWdlczogW10sCiAgICAgIHVzZXJzOiBbXSwKICAgICAgY3VycmVudElEOiBbXSwKICAgICAgdXNlclRoYXREaXNjb25uZWN0ZWQ6ICcnLAogICAgICB1c2VyVGhhdENvbm5lY3RlZDogJycsCiAgICAgCgoKICAgICAgc29ja2V0OiBpbyh2YXJzLmJhc2VQYXRoLCB7CiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZSwKICAgICAgICBleHRyYUhlYWRlcnM6IHsKICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfSwKCiAgbWV0aG9kcyA6IHsKICAgIHNlbmRNZXNzYWdlKCkgewogICAgdGhpcy5zb2NrZXQuZW1pdCgnU0VORF9NRVNTQUdFJywge3VzZXI6IHRoaXMuQ2hhdFVzZXJOYW1lIHx8ICJBbm9ueW1vdXMiLCBtZXNzYWdlOiB0aGlzLm1lc3NhZ2V9KTsKICAgIAogICAgdGhpcy5tZXNzYWdlID0gJyc7CiAgICB9LAoKICAgIGdldE5ld0lkKCkgewogICAgICB0aGlzLmN1cnJlbnRJRCsrOwogICAgICByZXR1cm4gdGhpcy5jdXJyZW50SUQ7CiAgICB9LAoKICAgIHNlbmRPbkVudGVyKCkgewogICAgICBpZiAodGhpcy5tZXNzYWdlQ29udGVudCA9PSBmYWxzZSAmJiBldmVudC5rZXlDb2RlID09IDEzKSB7CiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSgpOwogICAgICB9ZWxzZSB7CiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCgiVFlQSU5HIiwgeyB1c2VyOiB0aGlzLnVzZXJuYW1lIHx8ICJBbmFueW1vdXMifSk7CiAgICAgIH0KICAgIH0sCgogICAgc2Nyb2xsVG9FbmQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLiRyZWZzLnNjcm9sbDsKICAgICAgICAgICAgY29udGVudC5zY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbEhlaWdodAogICAgICAgIH0sCgogIH0sCgogIGNvbXBvbmVudHM6IHsKICAgIENoYXRNZXNzYWdlLCBDaGF0VXNlciwKICB9Cn0KCgoKCg=="},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"Chat.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <main>\n   \n      <section id=\"chat\">\n        <!-- left hand side -> users go here -->\n        <section id=\"chat-users-ui\">\n          <h2 class=\"online-users\">Current Users:</h2>\n          \n          <ul id=\"current-users\">\n            <ChatUser\n            v-for=\"user in users\"\n            :key=\"user.user\"\n            :username=\"user\"\n            />\n          </ul>\n        </section>\n        \n      \n\n        <!-- right hand side -> cha UI -->\n        <section id=\"chat-messages-ui\">\n\n          <div class=\"welcome-message\">\n          <img src=\"@/assets/images/logo_v.png\" alt=\"Safe Chat logo\" class=\"logo_v\">\n          <h1 class=\"welcome-text\">Welcome, {{ ChatUserName }}</h1>\n          </div>\n\n          <!-- render a component for every message -->    \n          <div class=\"chat-messages\"  ref=\"scroll\">\n            <ChatMessage\n            v-for=\"msg in messages\"\n            :key=\"msg.id\"\n            :message=\"msg.message\"\n            :user=\"msg.user\"\n            :sender=\"ChatUserName === msg.user ? 'sender' : 'receiver'\"\n            />\n          </div>\n         \n          <section id=\"text-wrapper\">\n            <textarea @keyup.enter=\"sendOnEnter\" id=\"message\" v-model=\"message\" placeholder=\"What's on your mind?\"></textarea>\n\n            <button id=\"sendMessage\" \n            @click=\"sendMessage\" \n            :disabled=\"messageContent\"\n            :class=\"{'disabled': messageContent}\">\n            <i class=\"fa-solid fa-plane-departure\"></i>\n            </button>\n            <div class=\"status\"> \n              <p class=\"disconnected\">{{ userThatDisconnected}}</p> \n              <p class=\"disconnected\">{{ userThatConnected }}</p>   \n            </div>\n          </section>\n        </section>\n      </section>\n    \n  </main>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nimport vars from \"@/env.js\";\nimport ChatMessage from \"@/components/ChatMessage.vue\";\nimport ChatUser from \"@/components/ChatUser.vue\";\n\n\nexport default {\n  name: \"TheChatComponent\",\n\n  props: {\n    ChatUserName: String, \n  },\n\n  mounted() {\n    let vm = this;\n\n    this.socket.on(\"CONNECTED\", (id) => {\n      vm.socketID = id;\n\n      this.socket.emit('user-joined', { user: this.ChatUserName || \"Anonymous\"});\n    })\n\n    this.socket.on(\"joined\", (data) => {\n      vm.users = data.user;\n      console.log(vm.users);\n    })\n\n    this.socket.on('user-has-joined', (data) => {\n      vm.userThatConnected = data.message;\n      setTimeout(function() { vm.userThatConnected = ''; }, 3000);\n    })\n\n\n    this.socket.on('user-disconnected', (data) => {\n      vm.userThatDisconnected = data.messageDisconnect;\n      setTimeout(function() { vm.userThatDisconnected = ''; }, 3000);\n    })\n\n\n    this.socket.on('MESSAGE', (message) => {\n      message.id = this.getNewId();\n      \n      vm.messages = [ ...vm.messages, message];\n      console.log(message);\n\n       this.$nextTick(() => this.scrollToEnd());\n      \n      // const chatMessages = document.querySelector('.chat-messages-ui');\n      // chatMessages.scrollTop = chatMessages.scrollHeight;\n    })\n  },\n\n  computed: {\n    messageContent: function() {\n      return this.message.trim() === '';\n    },\n\n    senderReceiver: function(socketID) {\n      return socketID === this.socketID\n    }\n  },\n\n\n  data() {\n    return {\n      // store the connection ID so we can use it later\n      socketID: '',\n      message: '',\n      messages: [],\n      users: [],\n      currentID: [],\n      userThatDisconnected: '',\n      userThatConnected: '',\n     \n\n\n      socket: io(vars.basePath, {\n        withCredentials: false,\n        extraHeaders: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      })\n    }\n  },\n\n  methods : {\n    sendMessage() {\n    this.socket.emit('SEND_MESSAGE', {user: this.ChatUserName || \"Anonymous\", message: this.message});\n    \n    this.message = '';\n    },\n\n    getNewId() {\n      this.currentID++;\n      return this.currentID;\n    },\n\n    sendOnEnter() {\n      if (this.messageContent == false && event.keyCode == 13) {\n        this.sendMessage();\n      }else {\n        this.socket.emit(\"TYPING\", { user: this.username || \"Ananymous\"});\n      }\n    },\n\n    scrollToEnd: function () {\n            var content = this.$refs.scroll;\n            content.scrollTop = content.scrollHeight\n        },\n\n  },\n\n  components: {\n    ChatMessage, ChatUser,\n  }\n}\n\n\n\n\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/sass/chat.scss\";\n</style>\n"]}]}