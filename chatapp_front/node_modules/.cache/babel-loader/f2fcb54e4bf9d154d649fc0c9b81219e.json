{"remainingRequest":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/babel-loader/lib/index.js!/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/src/views/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/src/views/Chat.vue","mtime":1646438637997},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/babel.config.js","mtime":1643429652595},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/cache-loader/dist/cjs.js","mtime":1643428235000},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/babel-loader/lib/index.js","mtime":1643429647236},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/cache-loader/dist/cjs.js","mtime":1643428235000},{"path":"/Users/shirinhk/Desktop/ChatApp_Shirin/chatapp_front/node_modules/vue-loader/lib/index.js","mtime":1643429647372}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvc2hpcmluaGsvRGVza3RvcC9DaGF0QXBwX1NoaXJpbi9jaGF0YXBwX2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGlvIGZyb20gInNvY2tldC5pby1jbGllbnQiOwppbXBvcnQgdmFycyBmcm9tICJAL2Vudi5qcyI7CmltcG9ydCBDaGF0TWVzc2FnZSBmcm9tICJAL2NvbXBvbmVudHMvQ2hhdE1lc3NhZ2UudnVlIjsKaW1wb3J0IENoYXRVc2VyIGZyb20gIkAvY29tcG9uZW50cy9DaGF0VXNlci52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRoZUNoYXRDb21wb25lbnQiLAogIHByb3BzOiB7CiAgICBDaGF0VXNlck5hbWU6IFN0cmluZwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIHZtID0gdGhpczsKICAgIHRoaXMuc29ja2V0Lm9uKCJDT05ORUNURUQiLCBmdW5jdGlvbiAoaWQpIHsKICAgICAgdm0uc29ja2V0SUQgPSBpZDsKCiAgICAgIF90aGlzLnNvY2tldC5lbWl0KCd1c2VyLWpvaW5lZCcsIHsKICAgICAgICB1c2VyOiBfdGhpcy5DaGF0VXNlck5hbWUgfHwgIkFub255bW91cyIKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuc29ja2V0Lm9uKCJqb2luZWQiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICB2bS51c2VycyA9IGRhdGEudXNlcjsKICAgICAgY29uc29sZS5sb2codm0udXNlcnMpOwogICAgfSk7CiAgICB0aGlzLnNvY2tldC5vbigndXNlci1oYXMtam9pbmVkJywgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgdm0udXNlclRoYXRDb25uZWN0ZWQgPSBkYXRhLm1lc3NhZ2U7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHZtLnVzZXJUaGF0Q29ubmVjdGVkID0gJyc7CiAgICAgIH0sIDMwMDApOwogICAgfSk7CiAgICB0aGlzLnNvY2tldC5vbigndXNlci1kaXNjb25uZWN0ZWQnLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICB2bS51c2VyVGhhdERpc2Nvbm5lY3RlZCA9IGRhdGEubWVzc2FnZURpc2Nvbm5lY3Q7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHZtLnVzZXJUaGF0RGlzY29ubmVjdGVkID0gJyc7CiAgICAgIH0sIDMwMDApOwogICAgfSk7CiAgICB0aGlzLnNvY2tldC5vbignTUVTU0FHRScsIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgIG1lc3NhZ2UuaWQgPSBfdGhpcy5nZXROZXdJZCgpOwogICAgICB2bS5tZXNzYWdlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodm0ubWVzc2FnZXMpLCBbbWVzc2FnZV0pOwogICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTsKCiAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnNjcm9sbFRvRW5kKCk7CiAgICAgIH0pOyAvLyBjb25zdCBjaGF0TWVzc2FnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1tZXNzYWdlcy11aScpOwogICAgICAvLyBjaGF0TWVzc2FnZXMuc2Nyb2xsVG9wID0gY2hhdE1lc3NhZ2VzLnNjcm9sbEhlaWdodDsKCiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBtZXNzYWdlQ29udGVudDogZnVuY3Rpb24gbWVzc2FnZUNvbnRlbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2UudHJpbSgpID09PSAnJzsKICAgIH0sCiAgICBzZW5kZXJSZWNlaXZlcjogZnVuY3Rpb24gc2VuZGVyUmVjZWl2ZXIoc29ja2V0SUQpIHsKICAgICAgcmV0dXJuIHNvY2tldElEID09PSB0aGlzLnNvY2tldElEOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIHN0b3JlIHRoZSBjb25uZWN0aW9uIElEIHNvIHdlIGNhbiB1c2UgaXQgbGF0ZXIKICAgICAgc29ja2V0SUQ6ICcnLAogICAgICBtZXNzYWdlOiAnJywKICAgICAgbWVzc2FnZXM6IFtdLAogICAgICB1c2VyczogW10sCiAgICAgIGN1cnJlbnRJRDogW10sCiAgICAgIHVzZXJUaGF0RGlzY29ubmVjdGVkOiAnJywKICAgICAgdXNlclRoYXRDb25uZWN0ZWQ6ICcnLAogICAgICBzb2NrZXQ6IGlvKHZhcnMuYmFzZVBhdGgsIHsKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlLAogICAgICAgIGV4dHJhSGVhZGVyczogewogICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJwogICAgICAgIH0KICAgICAgfSkKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ1NFTkRfTUVTU0FHRScsIHsKICAgICAgICB1c2VyOiB0aGlzLkNoYXRVc2VyTmFtZSB8fCAiQW5vbnltb3VzIiwKICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UKICAgICAgfSk7CiAgICAgIHRoaXMubWVzc2FnZSA9ICcnOwogICAgfSwKICAgIGdldE5ld0lkOiBmdW5jdGlvbiBnZXROZXdJZCgpIHsKICAgICAgdGhpcy5jdXJyZW50SUQrKzsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudElEOwogICAgfSwKICAgIHNlbmRPbkVudGVyOiBmdW5jdGlvbiBzZW5kT25FbnRlcigpIHsKICAgICAgaWYgKHRoaXMubWVzc2FnZUNvbnRlbnQgPT0gZmFsc2UgJiYgZXZlbnQua2V5Q29kZSA9PSAxMykgewogICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCJUWVBJTkciLCB7CiAgICAgICAgICB1c2VyOiB0aGlzLnVzZXJuYW1lIHx8ICJBbmFueW1vdXMiCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxUb0VuZDogZnVuY3Rpb24gc2Nyb2xsVG9FbmQoKSB7CiAgICAgIHZhciBjb250ZW50ID0gdGhpcy4kcmVmcy5zY3JvbGw7CiAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxIZWlnaHQ7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDaGF0TWVzc2FnZTogQ2hhdE1lc3NhZ2UsCiAgICBDaGF0VXNlcjogQ2hhdFVzZXIKICB9Cn07"},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <main>\n   \n      <section id=\"chat\">\n        <!-- left hand side -> users go here -->\n        <section id=\"chat-users-ui\">\n          <h2 class=\"online-users\">Current Users:</h2>\n          \n          <ul id=\"current-users\">\n            <ChatUser\n            v-for=\"user in users\"\n            :key=\"user.user\"\n            :username=\"user\"\n            />\n          </ul>\n        </section>\n        \n      \n\n        <!-- right hand side -> cha UI -->\n        <section id=\"chat-messages-ui\">\n\n          <div class=\"welcome-message\">\n          <img src=\"@/assets/images/logo_v.png\" alt=\"Safe Chat logo\" class=\"logo_v\">\n          <h1 class=\"welcome-text\">Welcome, {{ ChatUserName }}</h1>\n          </div>\n\n          <!-- render a component for every message -->    \n          <div class=\"chat-messages\"  ref=\"scroll\">\n            <ChatMessage\n            v-for=\"msg in messages\"\n            :key=\"msg.id\"\n            :message=\"msg.message\"\n            :user=\"msg.user\"\n            :sender=\"ChatUserName === msg.user ? 'sender' : 'receiver'\"\n            />\n          </div>\n         \n          <section id=\"text-wrapper\">\n            <textarea @keyup.enter=\"sendOnEnter\" id=\"message\" v-model=\"message\" placeholder=\"What's on your mind?\"></textarea>\n\n            <button id=\"sendMessage\" \n            @click=\"sendMessage\" \n            :disabled=\"messageContent\"\n            :class=\"{'disabled': messageContent}\">\n            <i class=\"fa-solid fa-plane-departure\"></i>\n            </button>\n            <div class=\"status\"> \n              <p class=\"disconnected\">{{ userThatDisconnected}}</p> \n              <p class=\"disconnected\">{{ userThatConnected }}</p>   \n            </div>\n          </section>\n        </section>\n      </section>\n    \n  </main>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nimport vars from \"@/env.js\";\nimport ChatMessage from \"@/components/ChatMessage.vue\";\nimport ChatUser from \"@/components/ChatUser.vue\";\n\n\nexport default {\n  name: \"TheChatComponent\",\n\n  props: {\n    ChatUserName: String, \n  },\n\n  mounted() {\n    let vm = this;\n\n    this.socket.on(\"CONNECTED\", (id) => {\n      vm.socketID = id;\n\n      this.socket.emit('user-joined', { user: this.ChatUserName || \"Anonymous\"});\n    })\n\n    this.socket.on(\"joined\", (data) => {\n      vm.users = data.user;\n      console.log(vm.users);\n    })\n\n    this.socket.on('user-has-joined', (data) => {\n      vm.userThatConnected = data.message;\n      setTimeout(function() { vm.userThatConnected = ''; }, 3000);\n    })\n\n\n    this.socket.on('user-disconnected', (data) => {\n      vm.userThatDisconnected = data.messageDisconnect;\n      setTimeout(function() { vm.userThatDisconnected = ''; }, 3000);\n    })\n\n\n    this.socket.on('MESSAGE', (message) => {\n      message.id = this.getNewId();\n      \n      vm.messages = [ ...vm.messages, message];\n      console.log(message);\n\n       this.$nextTick(() => this.scrollToEnd());\n      \n      // const chatMessages = document.querySelector('.chat-messages-ui');\n      // chatMessages.scrollTop = chatMessages.scrollHeight;\n    })\n  },\n\n  computed: {\n    messageContent: function() {\n      return this.message.trim() === '';\n    },\n\n    senderReceiver: function(socketID) {\n      return socketID === this.socketID\n    }\n  },\n\n\n  data() {\n    return {\n      // store the connection ID so we can use it later\n      socketID: '',\n      message: '',\n      messages: [],\n      users: [],\n      currentID: [],\n      userThatDisconnected: '',\n      userThatConnected: '',\n     \n\n\n      socket: io(vars.basePath, {\n        withCredentials: false,\n        extraHeaders: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      })\n    }\n  },\n\n  methods : {\n    sendMessage() {\n    this.socket.emit('SEND_MESSAGE', {user: this.ChatUserName || \"Anonymous\", message: this.message});\n    \n    this.message = '';\n    },\n\n    getNewId() {\n      this.currentID++;\n      return this.currentID;\n    },\n\n    sendOnEnter() {\n      if (this.messageContent == false && event.keyCode == 13) {\n        this.sendMessage();\n      }else {\n        this.socket.emit(\"TYPING\", { user: this.username || \"Ananymous\"});\n      }\n    },\n\n    scrollToEnd: function () {\n            var content = this.$refs.scroll;\n            content.scrollTop = content.scrollHeight\n        },\n\n  },\n\n  components: {\n    ChatMessage, ChatUser,\n  }\n}\n\n\n\n\n</script>\n\n<style lang=\"scss\">\n@import \"@/assets/sass/chat.scss\";\n</style>\n"],"sourceRoot":"src/views"}]}